<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

    <ui:composition template="/template.xhtml" >

        <ui:define name="title">
            صفحة الإستقبال
        </ui:define>
        <ui:define name="body">
            <h:form>
                <script src="#{request.contextPath}/resources/js/graphdf.js" ></script>
                <fieldset>
                    <legend>المهام الأساسية</legend>
                    <a href="" class="btn btn-primary span2" style="font-size: 14pt;" ><i class="icon-wrench "> </i>&nbsp;&nbsp;&nbsp;إعدادات</a>
                    <a href="" class="btn btn-primary span2" style="font-size: 14pt;" ><i class="icon-hdd "> </i>&nbsp;&nbsp;&nbsp;استعادة قاعدة البيانات</a>
                    <a href="" class="btn btn-primary span2" style="font-size: 14pt;" ><i class="icon-download-alt"> </i>&nbsp;&nbsp;&nbsp;نسخ قاعدة البيانات</a>
                    <a href="" class="btn btn-primary span2" style="font-size: 14pt;" ><i class="icon-file"> </i>&nbsp;&nbsp;&nbsp;دليل الإستعمال</a>
                </fieldset>
                <br />
                <fieldset>
                    <legend>إحصائيات عامة</legend>
                    <div style="text-align: center; font-family: fantasy; font-weight: bold; font-size: 14pt;">
                        <h:outputText value="#{bundle.bIControllertitre}"/>
                        <br/>
                        <h:outputText value="لسنة" />
                        <h:outputText id="title" value=" #{bIController.anneeGeneral}" />
                    </div>
                    <div style="float: left; vertical-align: middle;" dir="rtl" align="left">
                        <h:outputText value="السنة:" />
                        <h:selectOneMenu styleClass="input-medium" id="annees" value="#{bIController.anneeGeneral}" >
                            <f:ajax render="flot title" event="change" execute="@this" />
                            <f:selectItems value="#{acte_DecesController.listannee()}"/>
                        </h:selectOneMenu>
                    </div>
                    <div>
                    </div>
                    <div style="clear: both; height: 10px;"></div>
                    <h:panelGroup id="flot">
                        <div id="graph" style="height: 500px;"> </div>
                        <h:outputScript library="js" name="flotr2.min.js" />
                        <script type="text/javascript">
                            d1 = [], i = 1
                        </script>
                        <ui:repeat value="#{bIController.dataN}" var="data">
                            <script type="text/javascript">
                                point = [i-0.25, #{data}];
                                d1.push(point);
                                i++;
                            </script>
                        </ui:repeat>
                        <script type="text/javascript">
                            d2 = [], i = 1
                        </script>
                        <ui:repeat value="#{bIController.dataD}" var="data">
                            <script type="text/javascript">
                                point = [i+0.25, #{data}];
                                d2.push(point);
                                i++;
                            </script>
                        </ui:repeat>
                        <script type="text/javascript">
                            // <![CDATA[ 
                            (function basic_bars(container, horizontal) {

                                var horizontal = ( horizontal ? true : false),
                                // Show horizontal bars
                                //d1 = [],
                                // First data series
                                //d2 = [],
                                // Second data series
                                point, // Data point variable declaration
                                i;

                                /*for ( i = 1; i < 13; i++) {

                                    if (horizontal) {
                                        point = [Math.ceil(Math.random() * 100), i];
                                    } else {
                                        point = [i, Math.ceil(Math.random() * 100)];
                                    }
                                    d1.push(point);

                                    if (horizontal) {
                                        point = [Math.ceil(Math.random() * 100), i + 0.5];
                                    } else {
                                        point = [i + 0.5, Math.ceil(Math.random() * 100)];
                                    }

                                    d2.push(point);
                                };*/

                                // Draw the graph
                                Flotr.draw(container, [{data:d1, label:"الولادات"}, {data:d2, label:"الوفيات"}], {
                                    bars : {
                                        show : true,
                                        horizontal : horizontal,
                                        shadowSize : 0,
                                        barWidth : 0.5
                                    },
                                    mouse : {
                                        trackFormatter: function(obj){ return obj.y; },
                                        track : true,
                                        relative : true
                                    },
                                    xaxis:{
                                        title : 'الشهر',
                                        tickSize : 1,
                                        min: 1,
                                        ticks: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
                                    },
                                    yaxis : {
                                        title : 'العدد',
                                        min : 0,
                                        autoscaleMargin : 1
                                    },
                                    legend: { show: true }
                                });
                            })(document.getElementById("graph"));
                            // ]]> 
                        </script>
                    </h:panelGroup>
                </fieldset>
            </h:form>
        </ui:define>
    </ui:composition>
</html>