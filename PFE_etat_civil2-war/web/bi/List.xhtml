<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:b="http://richfaces.org/sandbox/bootstrap">

    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="#{bundle.ListUserTitle}"></h:outputText>
        </ui:define>
        <ui:define name="body">
            <b:modal></b:modal>
            <script src="#{request.contextPath}/resources/js/jquery.dataTables.js" ></script>
            <link rel="stylesheet" href="#{request.contextPath}/resources/css/DT_bootstrap.css" />
            <script src="#{request.contextPath}/resources/js/DT_bootstrap.js" ></script>



            <h:form prependId="false">
                <h:panelGroup id="messagePanel" layout="block">
                    <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
                </h:panelGroup>

                <fieldset style="border:2px solid rgb(58,135,173); margin-left: 20px; margin-top: 20px; margin-bottom: 20px; -moz-border-radius:8px; -webkit-border-radius:8px; border-radius:8px;">
                    <legend style=" margin-bottom:0px; font-size: 30px;margin-right: 10px;
                            margin-left:16px; border-bottom: 0px; width: auto;">الإحصائيات الشهرية:</legend>
                    <b:gridRow id="flot" >
                        <div class="span5">
                            <div id="graph" style="height: 500px;"> </div>
                            <h:outputScript library="js" name="flotr2.min.js" />
                            <script type="text/javascript">
                                // <![CDATA[ 
                                (function basic_bars(container, horizontal) {

                                    //var horizontal = (horizontal ? true : false),
                                    // Show horizontal bars
                                    d1 = [[1, #{bIController.countHommeNaiss+bIController.countFemmeNaiss}],[2, #{bIController.countHommeDec+bIController.countFemmeDec}],[3, 0],[4, 0]],
                                    
                                    // Draw the graph
                                    Flotr.draw(
                                    container, [d1], {
                                        bars: {
                                            show: true,
                                            horizontal: horizontal,
                                            shadowSize: 0,
                                            barWidth: 0.5
                                        },
                                        mouse: {
                                            trackFormatter: function(obj){ return obj.y; },
                                            track: true,
                                            relative: true
                                        },
                                        xaxis:{
                                            title : '',
                                            tickSize : 1,
                                            min: 1,
                                            ticks: [[1, 'الولادات'],[2, 'الوفيات'],[3, 'jug Naiss'],[4, 'jug dec']]
                                        },
                                        yaxis: {
                                            min: 0,
                                            autoscaleMargin: 1
                                        }
                                    });
                                })(document.getElementById("graph"));
                                // ]]> 
                            </script>
                        </div>
                        <b:gridColumn span="4">
                            <h:panelGrid columns="2" dir="rtl">
                                <h:outputText value="السنة:" />
                                <h:selectOneMenu styleClass="input-medium" id="annee" value="#{bIController.anneeGeneral}" >
                                    <f:ajax execute="annee" event="change" render="flot" listener="#{bIController.table1()}" />
                                    <f:selectItem itemLabel="1990" itemValue="1990"/>  
                                    <f:selectItem itemLabel="1991" itemValue="1991"/>  
                                    <f:selectItem itemLabel="1992" itemValue="1992"/>  
                                    <f:selectItem itemLabel="1993" itemValue="1993"/>  
                                </h:selectOneMenu>
                                <h:outputText value="الشهر:" />
                                <h:selectOneMenu styleClass="input-medium" id="mois" value="#{bIController.mois}" >
                                    <f:ajax execute="mois" render="flot" listener="#{bIController.table1()}" />
                                    <f:selectItem itemLabel="01" itemValue="01"/>
                                    <f:selectItem itemLabel="02" itemValue="02"/>
                                    <f:selectItem itemLabel="03" itemValue="03"/>
                                    <f:selectItem itemLabel="04" itemValue="04"/>
                                    <f:selectItem itemLabel="05" itemValue="05"/>
                                    <f:selectItem itemLabel="06" itemValue="06"/>
                                    <f:selectItem itemLabel="07" itemValue="07"/>
                                    <f:selectItem itemLabel="08" itemValue="08"/>
                                    <f:selectItem itemLabel="09" itemValue="09"/>
                                    <f:selectItem itemLabel="10" itemValue="10"/>
                                    <f:selectItem itemLabel="11" itemValue="11"/>
                                    <f:selectItem itemLabel="12" itemValue="12"/>
                                </h:selectOneMenu>
                                <h:commandLink actionListener="#{bIController.DOCX}" target="_blank" value="جذاذة الفرز 1" styleClass="btn btn-primary span2" />
                                <h:commandLink action="#" value="جذاذة الفرز 2" styleClass="btn btn-primary span2" />
                                <h:commandLink action="#" value="جذاذة الفرز 3" styleClass="btn btn-primary span2" />
                                <h:commandLink action="#" value="جذاذة الفرز 4 و 5" styleClass="btn btn-primary span2" />
                            </h:panelGrid>
                        </b:gridColumn>
                    </b:gridRow>
                </fieldset>
            </h:form>
        </ui:define>
    </ui:composition>
</html>
